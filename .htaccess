ErrorDocument 404 /404

RewriteEngine on

# Redirect to 404 if query strings are used
RewriteCond %{THE_REQUEST} \?[^\ ]+
RewriteRule .? /404? [L,R=301]

# Handle language URLs without query strings
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z]{2})/(.*)$ /$2?lang=$1 [L,QSA]

# Check for file in directory with .php extension
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [NC,L]

DirectoryIndex index.php
